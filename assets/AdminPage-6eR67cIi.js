import{r as n,u as A,j as e,R as ge,t as W,G as he,T as _,b as pe}from"./index-aN4DhRhX.js";import{g as z,c as ne,d as fe,u as be,e as je}from"./careersService-CTiZf0mJ.js";import{g as K,d as ye}from"./contactService-DSxE3hmd.js";import{l as ie,d as ve,u as Ne,c as we}from"./newsService-BCoSG3Cn.js";import{g as re,d as ke,u as Ce,a as Se}from"./teamService-vBpvNe75.js";import{N as Te}from"./NewsCard-CMUgTNok.js";import{g as Ee,d as Me,u as Le,a as De}from"./partnerService-Dcww-Tgz.js";const P=({command:t,icon:a,title:f,isActive:x,onClick:d,disabled:l})=>{const r=m=>{if(m.preventDefault(),d){d(m);return}t&&document.execCommand(t,!1)};return e.jsx("button",{onMouseDown:r,title:f,disabled:l,className:`p-2 rounded transition-colors w-9 h-9 flex items-center justify-center ${x?"bg-gray-300":"hover:bg-gray-200"} disabled:opacity-50 disabled:cursor-not-allowed`,children:a})},Ue=["bold","italic","underline","insertOrderedList","insertUnorderedList","justifyLeft","justifyCenter","justifyRight"],V=({value:t,onChange:a,placeholder:f})=>{const x=n.useRef(null),{t:d}=A(),[l,r]=n.useState(new Set),[m,u]=n.useState("p");n.useEffect(()=>{const c=x.current;c&&c.innerHTML!==t&&(c.innerHTML=t)},[t]);const b=n.useCallback(()=>{x.current&&a(x.current.innerHTML)},[a]),h=n.useCallback(()=>{const c=new Set;for(const w of Ue)document.queryCommandState(w)&&c.add(w);const E=window.getSelection();if(E&&E.rangeCount>0){let w=E.getRangeAt(0).startContainer;w.nodeType!==Node.ELEMENT_NODE&&(w=w.parentNode),w&&w.closest("a")&&c.add("unlink")}let L=document.queryCommandValue("formatBlock").toLowerCase();["div","p",""].includes(L)&&(L="p"),u(L),r(c)},[]);n.useEffect(()=>{const c=x.current;if(!c)return;const E=()=>{(document.activeElement===c||c.contains(document.activeElement))&&h()};return document.addEventListener("selectionchange",E),c.addEventListener("focus",h),c.addEventListener("click",h),c.addEventListener("keyup",h),()=>{document.removeEventListener("selectionchange",E),c.removeEventListener("focus",h),c.removeEventListener("click",h),c.removeEventListener("keyup",h)}},[h]);const p=c=>{const E=c.target.value;document.execCommand("formatBlock",!1,`<${E}>`)},y=()=>{const c=prompt(d.richTextEditor.linkPrompt);c&&document.execCommand("createLink",!1,c)},v=()=>{const c=prompt(d.richTextEditor.imagePrompt);c&&document.execCommand("insertImage",!1,c)};return e.jsxs("div",{className:"border border-gray-300 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center p-2 border-b bg-gray-50 rounded-t-lg flex-wrap gap-1",children:[e.jsxs("select",{value:m,onChange:p,className:"p-1.5 border border-gray-300 rounded bg-white text-sm focus:ring-1 focus:ring-viniela-gold focus:border-viniela-gold",children:[e.jsx("option",{value:"p",children:d.richTextEditor.paragraph}),e.jsx("option",{value:"h2",children:d.richTextEditor.heading2}),e.jsx("option",{value:"h3",children:d.richTextEditor.heading3})]}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),e.jsx(P,{title:d.richTextEditor.bold,command:"bold",icon:e.jsx("i",{className:"fa-solid fa-bold"}),isActive:l.has("bold")}),e.jsx(P,{title:d.richTextEditor.italic,command:"italic",icon:e.jsx("i",{className:"fa-solid fa-italic"}),isActive:l.has("italic")}),e.jsx(P,{title:d.richTextEditor.underline,command:"underline",icon:e.jsx("i",{className:"fa-solid fa-underline"}),isActive:l.has("underline")}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),e.jsx(P,{title:d.richTextEditor.addLink,onClick:y,icon:e.jsx("i",{className:"fa-solid fa-link"}),isActive:!1}),e.jsx(P,{title:d.richTextEditor.removeLink,command:"unlink",icon:e.jsx("i",{className:"fa-solid fa-link-slash"}),isActive:l.has("unlink"),disabled:!l.has("unlink")}),e.jsx(P,{title:d.richTextEditor.insertImage,onClick:v,icon:e.jsx("i",{className:"fa-solid fa-image"}),isActive:!1}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),e.jsx(P,{title:d.richTextEditor.alignLeft,command:"justifyLeft",icon:e.jsx("i",{className:"fa-solid fa-align-left"}),isActive:l.has("justifyLeft")}),e.jsx(P,{title:d.richTextEditor.alignCenter,command:"justifyCenter",icon:e.jsx("i",{className:"fa-solid fa-align-center"}),isActive:l.has("justifyCenter")}),e.jsx(P,{title:d.richTextEditor.alignRight,command:"justifyRight",icon:e.jsx("i",{className:"fa-solid fa-align-right"}),isActive:l.has("justifyRight")}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),e.jsx(P,{title:d.richTextEditor.orderedList,command:"insertOrderedList",icon:e.jsx("i",{className:"fa-solid fa-list-ol"}),isActive:l.has("insertOrderedList")}),e.jsx(P,{title:d.richTextEditor.unorderedList,command:"insertUnorderedList",icon:e.jsx("i",{className:"fa-solid fa-list-ul"}),isActive:l.has("insertUnorderedList")})]}),e.jsx("div",{ref:x,onInput:b,contentEditable:!0,className:"prose max-w-none p-3 min-h-[120px] focus:outline-none prose-h2:text-2xl prose-h3:text-xl","data-placeholder":f}),e.jsx("style",{children:`
                [contenteditable][data-placeholder]:empty:before {
                    content: attr(data-placeholder);
                    color: #9ca3af;
                    pointer-events: none;
                }
                .prose img {
                    max-width: 100%;
                    height: auto;
                    border-radius: 0.5rem;
                }
             `})]})},O=({isOpen:t,onClose:a,onConfirm:f,title:x,message:d})=>{const{t:l}=A();return n.useEffect(()=>{const r=m=>{m.key==="Escape"&&a()};return t?(window.addEventListener("keydown",r),document.body.style.overflow="hidden"):document.body.style.overflow="auto",()=>{window.removeEventListener("keydown",r),document.body.style.overflow="auto"}},[t,a]),t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-[100] flex justify-center items-center p-4 animate-fade-in",onClick:a,"aria-modal":"true",role:"dialog",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 m-4 text-center transform animate-scale-in",onClick:r=>r.stopPropagation(),children:[e.jsx("h2",{className:"text-2xl font-bold text-viniela-dark mb-4",children:x}),e.jsx("p",{className:"text-viniela-gray mb-8",children:d}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:a,className:"px-6 py-2 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300 transition-colors",children:l.confirmationModal.cancel}),e.jsx("button",{onClick:f,className:"px-6 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-colors",children:l.confirmationModal.confirmDelete})]})]}),e.jsx("style",{children:`
        @keyframes fade-in { 0% { opacity: 0; } 100% { opacity: 1; } }
        .animate-fade-in { animation: fade-in 0.2s ease-out forwards; }
        @keyframes scale-in { 
          0% { opacity: 0; transform: scale(0.95) translateY(10px); } 
          100% { opacity: 1; transform: scale(1) translateY(0); } 
        }
        .animate-scale-in { animation: scale-in 0.2s ease-out forwards; }
      `})]}):null},Pe=["Full-time","Part-time","Contract","Internship"],Q={title:{id:""},location:{id:""},type:"Full-time",description:{id:""},responsibilities:{id:""},qualifications:{id:""}},Ae=({showToast:t})=>{const{t:a}=A(),[f,x]=n.useState("manage"),[d,l]=n.useState([]),[r,m]=n.useState([]),[u,b]=n.useState(null),[h,p]=n.useState(Q),[y,v]=n.useState("all"),[c,E]=n.useState(null),[L,w]=n.useState(!1),[M,F]=n.useState({key:"date",direction:"desc"}),$=async()=>{try{const[i,C]=await Promise.all([z(),ne()]);l(i),m(C)}catch(i){console.error("Gagal memuat data karir:",i),t(i instanceof Error?i.message:"Gagal memuat data karir dari server","error")}};n.useEffect(()=>{$()},[]);const D=()=>{b(null),p(Q)},I=async i=>{i.preventDefault(),w(!0);try{u?(await be({...u,...h}),t(a.admin.toast.jobUpdated)):(await je(h),t(a.admin.toast.jobCreated));const C=await z();l(C),D()}catch(C){console.error("Gagal menyimpan job:",C),t(C instanceof Error?C.message:"Gagal menyimpan data lowongan ke server","error")}finally{w(!1)}},s=i=>{b(i),p({title:i.title,location:i.location,type:i.type,description:i.description,responsibilities:i.responsibilities,qualifications:i.qualifications}),window.scrollTo(0,0)},g=async()=>{if(c)try{await fe(c);const i=await z();l(i),(u==null?void 0:u.id)===c&&D(),t(a.admin.toast.jobDeleted??"Job deleted")}catch(i){console.error("Gagal menghapus job:",i),t(i instanceof Error?i.message:"Gagal menghapus data lowongan di server","error")}finally{E(null)}},j=n.useMemo(()=>[...r.filter(C=>y==="all"||C.jobId===y)].sort((C,B)=>{if(M.key==="name")return M.direction==="asc"?C.name.localeCompare(B.name):B.name.localeCompare(C.name);const q=new Date(C.date).getTime(),R=new Date(B.date).getTime();return M.direction==="asc"?q-R:R-q}),[r,y,M]),S=i=>{const[C,B]=i.split("-");F({key:C,direction:B})};return e.jsxs(e.Fragment,{children:[e.jsx(O,{isOpen:!!c,onClose:()=>E(null),onConfirm:g,title:a.admin.deleteModalTitle,message:a.admin.confirmDeleteJob}),e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsxs("div",{className:"flex justify-center border-b border-gray-300 mb-8",children:[e.jsx("button",{onClick:()=>x("manage"),className:`sub-tab-button ${f==="manage"?"sub-tab-active":""}`,children:a.admin.manageJobs}),e.jsx("button",{onClick:()=>x("view"),className:`sub-tab-button ${f==="view"?"sub-tab-active":""}`,children:a.admin.viewApplications})]}),f==="manage"?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[e.jsxs("div",{className:"lg:col-span-3 bg-white p-8 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-viniela-dark border-b pb-4",children:u?a.admin.editJob:a.admin.formTitleJobs}),e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"form-section-title",children:a.admin.jobTitle}),e.jsx("input",{type:"text",placeholder:a.admin.titleIdPlaceholder,value:h.title.id,onChange:i=>p(C=>({...C,title:{id:i.target.value}})),className:"form-input",required:!0})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"form-section-title",children:a.admin.location}),e.jsx("input",{type:"text",placeholder:a.admin.locationIdPlaceholder,value:h.location.id,onChange:i=>p(C=>({...C,location:{id:i.target.value}})),className:"form-input",required:!0})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"form-section-title",children:a.admin.jobType}),e.jsx("select",{value:h.type,onChange:i=>p(C=>({...C,type:i.target.value})),className:"form-input",children:Pe.map(i=>e.jsx("option",{value:i,children:a.admin.jobTypes[i]},i))})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"form-section-title",children:a.admin.description}),e.jsx(V,{placeholder:a.admin.descriptionIdPlaceholder,value:h.description.id,onChange:i=>p(C=>({...C,description:{id:i}}))})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"form-section-title",children:a.admin.responsibilities}),e.jsx(V,{placeholder:a.admin.responsibilitiesIdPlaceholder,value:h.responsibilities.id,onChange:i=>p(C=>({...C,responsibilities:{id:i}}))})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"form-section-title",children:a.admin.qualifications}),e.jsx(V,{placeholder:a.admin.qualificationsIdPlaceholder,value:h.qualifications.id,onChange:i=>p(C=>({...C,qualifications:{id:i}}))})]}),e.jsxs("div",{className:"flex justify-end items-center space-x-3",children:[u&&e.jsx("button",{type:"button",onClick:D,className:"btn-secondary",children:a.admin.cancelButton}),e.jsxs("button",{type:"submit",className:"btn-primary",disabled:L,children:[L&&e.jsx("i",{className:"fa-solid fa-spinner fa-spin w-5 h-5 mr-2"}),L?a.admin.savingButton:u?a.admin.updateJob:a.admin.createJob]})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg sticky top-28",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-viniela-dark border-b pb-3",children:a.admin.currentJobs}),e.jsx("div",{className:"space-y-4 max-h-[65vh] overflow-y-auto pr-2",children:d.length>0?d.map(i=>e.jsxs("div",{className:"bg-viniela-silver/50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-viniela-dark",children:i.title.id}),e.jsxs("p",{className:"text-sm text-viniela-gray mt-1",children:[a.admin.jobTypes[i.type]," • ",i.location.id]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-3",children:[e.jsx("button",{onClick:()=>s(i),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:a.admin.edit}),e.jsx("button",{onClick:()=>E(i.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:a.admin.delete})]})]},i.id)):e.jsx("p",{className:"text-viniela-gray text-center py-8",children:a.admin.noJobs})})]})})]}):e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 items-end",children:[e.jsxs("div",{className:"flex-grow max-w-xs",children:[e.jsx("label",{className:"form-label",children:a.admin.applicationsFor}),e.jsxs("select",{value:y,onChange:i=>v(i.target.value),className:"form-input",children:[e.jsx("option",{value:"all",children:a.admin.allJobs}),d.map(i=>e.jsx("option",{value:i.id,children:i.title.id},i.id))]})]}),e.jsxs("div",{className:"flex-grow max-w-xs",children:[e.jsx("label",{className:"form-label",children:a.admin.sort}),e.jsxs("select",{value:`${M.key}-${M.direction}`,onChange:i=>S(i.target.value),className:"form-input",children:[e.jsx("option",{value:"date-desc",children:a.admin.sortByDateNewest}),e.jsx("option",{value:"date-asc",children:a.admin.sortByDateOldest}),e.jsx("option",{value:"name-asc",children:a.admin.sortByNameAZ}),e.jsx("option",{value:"name-desc",children:a.admin.sortByNameZA})]})]})]}),j.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.admin.applicantName}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.admin.jobTitle}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.admin.contact}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.admin.appliedOn}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(i=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:i.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:i.jobTitle})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-500",children:i.email}),e.jsx("div",{className:"text-sm text-gray-500",children:i.phone})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(i.date).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[e.jsx("a",{href:i.resume,download:i.resumeFileName,className:"text-blue-600 hover:text-blue-900",title:a.admin.downloadResume,children:e.jsx("i",{className:"fa-solid fa-file-arrow-down fa-lg"})}),i.coverLetter&&e.jsx("button",{onClick:()=>alert(i.coverLetter),className:"text-gray-600 hover:text-gray-900",title:a.admin.viewCoverLetter,children:e.jsx("i",{className:"fa-solid fa-envelope-open-text fa-lg"})})]})]},i.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-regular fa-folder-open fa-3x text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:a.admin.noApplications})]})]})]})]})},Fe=({showToast:t})=>{const{t:a}=A(),[f,x]=n.useState([]),[d,l]=n.useState(null),[r,m]=n.useState(null);n.useEffect(()=>{x(K())},[]);const u=()=>{d&&(ye(d),x(K()),l(null),t(a.admin.toast.messageDeleted??"Message deleted"))};return e.jsxs(e.Fragment,{children:[e.jsx(O,{isOpen:!!d,onClose:()=>l(null),onConfirm:u,title:a.admin.deleteModalTitle,message:a.admin.confirmDeleteMessage}),e.jsx("div",{className:"bg-white p-8 rounded-xl shadow-lg animate-fade-in-up",children:e.jsx("div",{className:"overflow-x-auto",children:f.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.admin.sender}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.admin.subject}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.admin.receivedOn}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(b=>e.jsxs(ge.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>m(r===b.id?null:b.id),children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.name}),e.jsx("div",{className:"text-sm text-gray-500",children:b.email})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:b.subject})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(b.date).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:h=>{h.stopPropagation(),l(b.id)},className:"text-red-600 hover:text-red-900 transition-colors p-2 hover:bg-red-50 rounded-full",children:e.jsx("i",{className:"fa-solid fa-trash"})})})]}),r===b.id&&e.jsx("tr",{className:"bg-gray-50 animate-fade-in",children:e.jsx("td",{colSpan:4,className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap font-mono bg-white p-4 rounded border border-gray-200",children:b.message})})})]},b.id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-regular fa-envelope-open fa-3x text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:a.admin.noMessages})]})})})]})},Ie=({data:t})=>{const a=t.reduce((l,r)=>l+r.value,0);let f=0;const x=l=>{const r=Math.cos(2*Math.PI*l),m=Math.sin(2*Math.PI*l);return[r,m]},d=t.map(l=>{const r=f,m=a===0?0:l.value/a;f+=m;const u=f,[b,h]=x(r),[p,y]=x(u),v=m>.5?1:0;return a===l.value?{path:"M 1 0 A 1 1 0 1 1 -1 0 A 1 1 0 1 1 1 0",color:l.color,percent:m,label:l.label,value:l.value}:{path:["M 0 0",`L ${b} ${h}`,`A 1 1 0 ${v} 1 ${p} ${y}`,"Z"].join(" "),color:l.color,percent:m,label:l.label,value:l.value}});return a===0?e.jsx("div",{className:"text-gray-400 text-sm text-center py-10",children:"No data available"}):e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-8 justify-center",children:[e.jsxs("div",{className:"relative w-48 h-48",children:[e.jsxs("svg",{viewBox:"-1.1 -1.1 2.2 2.2",className:"w-full h-full transform -rotate-90",children:[d.map((l,r)=>e.jsx("path",{d:l.path,fill:l.color,className:"hover:opacity-90 transition-opacity cursor-pointer stroke-white stroke-[0.02]",children:e.jsx("title",{children:`${l.label}: ${l.value} (${(l.percent*100).toFixed(1)}%)`})},r)),e.jsx("circle",{cx:"0",cy:"0",r:"0.6",fill:"white"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"block text-3xl font-bold text-viniela-dark",children:a}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-wide",children:"Total"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 min-w-[150px]",children:t.map((l,r)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm group cursor-default",children:[e.jsx("span",{className:"w-3 h-3 rounded-full shadow-sm group-hover:scale-125 transition-transform",style:{backgroundColor:l.color}}),e.jsxs("div",{className:"flex justify-between w-full text-gray-600",children:[e.jsx("span",{children:l.label}),e.jsx("span",{className:"font-bold text-viniela-dark ml-3",children:l.value})]})]},r))})]})},Be=({data:t,color:a})=>{const f=Math.max(...t.map(m=>m.value),1),x=24,d=12,l=t.length*(x+d),r=120;return t.length===0?e.jsx("div",{className:"text-gray-400 text-sm text-center py-10",children:"No data available"}):e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsx("svg",{width:"100%",height:l,className:"min-w-[300px] font-sans text-xs",children:t.map((m,u)=>{const b=m.value/f*100,h=u*(x+d);return e.jsxs("g",{className:"group",children:[e.jsx("rect",{x:r,y:h,width:`calc(100% - ${r+40}px)`,height:x,rx:"4",fill:"#f3f4f6"}),e.jsx("rect",{x:r,y:h,width:`${b*.8}%`,height:x,rx:"4",fill:a,className:"transition-all duration-1000 ease-out origin-left hover:opacity-80",children:e.jsx("animate",{attributeName:"width",from:"0",to:`${b*.8}%`,dur:"0.8s",fill:"freeze",calcMode:"spline",keySplines:"0.4 0 0.2 1"})}),e.jsx("text",{x:"0",y:h+x/1.5,fill:"#4b5563",className:"font-medium",style:{textOverflow:"ellipsis"},children:m.label.length>18?m.label.substring(0,18)+"...":m.label}),e.jsx("text",{x:`calc(${r}px + ${b*.8}% + 10px)`,y:h+x/1.5,fill:"#1a1a1a",fontWeight:"bold",children:m.value})]},u)})})})},$e=["company","division","industry","press"],Ge=()=>{const{t}=A(),[a,f]=n.useState([]),[x,d]=n.useState([]),[l,r]=n.useState([]),[m,u]=n.useState([]),[b,h]=n.useState([]);n.useEffect(()=>{(async()=>{try{try{const E=(await ie(1,200)).data,L=$e.map(w=>({label:t.admin.categories[w],value:E.filter(M=>M.category===w).length,color:w==="company"?"#c09a58":w==="division"?"#374151":w==="industry"?"#6b7280":"#9ca3af"})).filter(w=>w.value>0);f(L)}catch(c){console.error("Failed to load dashboard news stats",c)}try{const[c,E]=await Promise.all([z(),ne()]);d(c),r(E)}catch(c){console.error("Failed to load careers data",c)}try{const c=await K();u(c)}catch(c){console.error("Failed to load contact messages",c)}try{const c=await re();h(c)}catch(c){console.error("Failed to load team members",c)}}catch(c){console.error("Failed to load dashboard data",c)}})()},[t]);const p=x.map(v=>({label:v.title.id,value:l.filter(c=>c.jobId===v.id).length})).sort((v,c)=>c.value-v.value).slice(0,5),y=[{label:t.admin.totalNews,value:a.reduce((v,c)=>v+c.value,0),icon:"fa-newspaper",color:"text-blue-600",bg:"bg-blue-100"},{label:t.admin.totalApplications,value:l.length,icon:"fa-file-alt",color:"text-purple-600",bg:"bg-purple-100"},{label:t.admin.totalMessages,value:m.length,icon:"fa-inbox",color:"text-green-600",bg:"bg-green-100"},{label:t.admin.totalTeamMembers,value:b.length,icon:"fa-users",color:"text-orange-600",bg:"bg-orange-100"}];return e.jsxs("div",{className:"animate-fade-in-up space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:y.map(v=>e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 flex items-center gap-5 border border-gray-100",children:[e.jsx("div",{className:`${v.bg} ${v.color} p-4 rounded-2xl shadow-sm`,children:e.jsx("i",{className:`fa-solid ${v.icon} fa-lg w-6 h-6 flex items-center justify-center`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-viniela-dark tracking-tight",children:v.value}),e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mt-1",children:v.label})]})]},v.label))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-100 flex flex-col h-full",children:[e.jsxs("h3",{className:"text-lg font-bold text-viniela-dark mb-6 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-chart-pie text-viniela-gold"})," News Distribution"]}),e.jsx("div",{className:"flex-grow flex items-center justify-center",children:e.jsx(Ie,{data:a})})]}),e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-100 flex flex-col h-full",children:[e.jsxs("h3",{className:"text-lg font-bold text-viniela-dark mb-6 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-chart-bar text-viniela-gold"})," Top Job Applications"]}),e.jsx("div",{className:"flex-grow flex items-center",children:e.jsx(Be,{data:p,color:"#c09a58"})})]})]})]})},Je=({isOpen:t,onClose:a,articleData:f})=>{const[x,d]=n.useState("id"),{t:l}=A();if(n.useEffect(()=>{const m=u=>{u.key==="Escape"&&a()};return t&&window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)}},[t,a]),!t)return null;const r=[{key:"id",name:W.id.langName},{key:"en",name:W.en.langName},{key:"cn",name:W.cn.langName}];return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:a,children:[e.jsxs("div",{className:"bg-viniela-silver rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"p-6 sticky top-0 bg-viniela-silver border-b z-10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-viniela-dark",children:l.admin.previewTitle}),e.jsx("button",{onClick:a,className:"p-2 text-gray-500 hover:text-viniela-dark rounded-full hover:bg-gray-200 transition-colors",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"mt-4 border-b border-gray-300",children:e.jsx("nav",{className:"-mb-px flex space-x-6",children:r.map(m=>e.jsx("button",{onClick:()=>d(m.key),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${x===m.key?"border-viniela-gold text-viniela-gold":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:m.name},m.key))})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-center text-viniela-gray mb-6 text-sm",children:l.admin.previewSubtitle}),e.jsx("div",{className:"max-w-md mx-auto",children:e.jsx(Te,{article:f,lang:x,categoryTranslations:l.admin.categories})})]})]}),e.jsx("style",{children:`
          @keyframes fade-in {
            0% { opacity: 0; }
            100% { opacity: 1; }
          }
          .animate-fade-in {
            animation: fade-in 0.3s ease-out forwards;
          }
      `})]})},Oe=new he({apiKey:"AIzaSyB0BBG9LSqG_aIGzOD3Paka8psv-HqMczA"}),qe=["company","division","industry","press"],ee={title:{id:"",en:"",cn:""},content:{id:"",en:"",cn:""},imageUrls:[],category:"company"},Re="https://api.viniela.id",Y=t=>t?t.startsWith("http://")||t.startsWith("https://")?t:`${Re}${t.startsWith("/")?"":"/"}${t}`:"",ze=({showToast:t})=>{const{t:a}=A(),[f,x]=n.useState([]),[d,l]=n.useState(null),[r,m]=n.useState(1),u=20,[b,h]=n.useState(null),[p,y]=n.useState(ee),[v,c]=n.useState({}),[E,L]=n.useState(!1),[w,M]=n.useState({title:!1,content:!1}),[F,$]=n.useState(!1),[D,I]=n.useState(null),[s,g]=n.useState(!1),j=n.useCallback((o,N)=>{let k="";(!N||N.trim()==="")&&(k=a.admin.validation.required),c(T=>({...T,[o]:k}))},[a.admin.validation.required]),S=n.useCallback(async(o=1)=>{try{const N=await ie(o,u);x(N.data),l(N.meta),m(N.meta.page)}catch(N){console.error("Gagal memuat berita:",N),t(N instanceof Error?N.message:"Gagal memuat berita dari server","error")}},[u,t]);n.useEffect(()=>{S(1)},[S]);const i=n.useCallback((o,N)=>{const k=o.replace(/\.(id|en|cn)$/,"");j(k,typeof N=="string"?N:""),y(T=>{const U=o.split(".");if(U.length===2){const[G,J]=U,ue=T[G]||{};return{...T,[G]:{...ue,[J]:N}}}return{...T,[o]:N}})},[j]),C=n.useCallback(async o=>{const N=Array.isArray(o)?o:Array.from(o);if(N.length===0)return[];const k=new FormData;for(const T of N)T&&T.type&&T.type.startsWith("image/")&&k.append("files",T);if(!k.has("files"))return t("File yang dipilih bukan gambar","error"),[];try{g(!0);const T=await fetch("https://api.viniela.id/api/news/upload-images",{method:"POST",body:k});if(!T.ok){const J=await T.json().catch(()=>null),X=(J==null?void 0:J.error)||`Gagal upload gambar (status ${T.status})`;throw new Error(X)}const U=await T.json(),G=Array.isArray(U.urls)?U.urls:Array.isArray(U.files)?U.files:[];return G.length?t("Gambar berhasil diunggah","success"):t("Upload berhasil, tapi tidak ada URL gambar dikembalikan","error"),G}catch(T){return console.error("Upload gambar gagal:",T),t("Gagal upload gambar","error"),[]}finally{g(!1)}},[t]),B=n.useCallback(async o=>{const N=await C(o);N.length&&y(k=>({...k,imageUrls:[...k.imageUrls,...N]}))},[C]),q=n.useCallback(o=>{o.preventDefault(),o.stopPropagation(),!s&&o.dataTransfer.files&&B(o.dataTransfer.files)},[B,s]),R=o=>{s||o.target.files&&(B(o.target.files),o.target.value="")},oe=n.useCallback(o=>{y(N=>({...N,imageUrls:N.imageUrls.filter((k,T)=>T!==o)}))},[]),Z=async o=>{const N=p[o].id;if(N){M(k=>({...k,[o]:!0}));try{const T=o==="content"?`Terjemahkan konten teks di dalam HTML berikut dari Bahasa Indonesia ke Bahasa Inggris dan Bahasa Mandarin. Pertahankan struktur dan tag HTML apa adanya. HTML Indonesia: "${N}". Berikan respons dalam format JSON yang valid dengan key "en" untuk Bahasa Inggris dan "cn" untuk Bahasa Mandarin.`:`Terjemahkan teks Bahasa Indonesia berikut ke Bahasa Inggris dan Bahasa Mandarin. Teks Indonesia: "${N}". Berikan respons dalam format JSON yang valid dengan key "en" untuk Bahasa Inggris dan "cn" untuk Bahasa Mandarin.`,U=await Oe.models.generateContent({model:"gemini-2.5-flash",contents:T,config:{responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{en:{type:_.STRING},cn:{type:_.STRING}},required:["en","cn"]}}})}catch(k){console.error("Gagal menerjemahkan:",k),t("Gagal menerjemahkan teks","error")}finally{M(k=>({...k,[o]:!1}))}}},H=n.useCallback(()=>{h(null),y(ee),c({})},[]),de=async o=>{o.preventDefault();const N={};if(p.title.id||(N.title=a.admin.validation.required),c(N),!Object.values(N).some(k=>k)){if(s){t("Tunggu sampai upload gambar selesai","error");return}$(!0);try{const k={title:p.title,content:p.content,imageUrls:p.imageUrls,category:p.category};if(b){const T=await Ne(b.id,k);x(U=>U.map(G=>G.id===T.id?T:G)),t(a.admin.toast.newsUpdated)}else{const T=await we(k);x(U=>[T,...U]),t(a.admin.toast.newsCreated)}H()}catch(k){console.error("Gagal menyimpan berita:",k),t(k instanceof Error?k.message:"Gagal menyimpan berita ke server","error")}finally{$(!1)}}},ce=o=>{h(o),y({title:o.title,content:o.content,imageUrls:o.imageUrls,category:o.category}),c({}),window.scrollTo(0,0)},me=async()=>{if(D)try{await ve(D),x(o=>o.filter(N=>N.id!==D)),(b==null?void 0:b.id)===D&&H(),t(a.admin.toast.newsDeleted)}catch(o){console.error("Gagal menghapus berita:",o),t(o instanceof Error?o.message:"Gagal menghapus berita di server","error")}finally{I(null)}},xe=n.useMemo(()=>Object.values(v).every(o=>!o)&&p.title.id,[v,p.title.id]);return e.jsxs(e.Fragment,{children:[e.jsx(O,{isOpen:!!D,onClose:()=>I(null),onConfirm:me,title:a.admin.deleteModalTitle,message:a.admin.confirmDeleteNews}),e.jsx(Je,{isOpen:E,onClose:()=>L(!1),articleData:p}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8 animate-fade-in-up",children:[e.jsxs("div",{className:"lg:col-span-3 bg-white p-6 md:p-8 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-viniela-dark border-b pb-4",children:b?a.admin.editNews:a.admin.formTitle}),e.jsxs("form",{onSubmit:de,className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("h3",{className:"form-section-title",children:a.admin.titleLabel}),e.jsxs("button",{type:"button",onClick:()=>Z("title"),disabled:w.title||!p.title.id,className:"translate-btn",children:[w.title?e.jsx("i",{className:"fa-solid fa-spinner fa-spin w-4 h-4"}):e.jsx("i",{className:"fa-solid fa-language w-4 h-4"}),e.jsx("span",{children:w.title?a.admin.translating:a.admin.translateFromId})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:a.admin.titleIdPlaceholder,value:p.title.id,onChange:o=>i("title.id",o.target.value),className:`form-input ${v.title?"border-red-500":""}`}),v.title&&e.jsx("p",{className:"form-error",children:v.title})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"form-section-title",children:a.admin.categoryLabel}),e.jsx("select",{value:p.category,onChange:o=>i("category",o.target.value),className:"form-input",children:qe.map(o=>e.jsx("option",{value:o,children:a.admin.categories[o]},o))})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"form-section-title",children:a.admin.imageLabel}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-4",children:p.imageUrls.map((o,N)=>e.jsxs("div",{className:"relative group aspect-square",children:[e.jsx("img",{src:Y(o),alt:`pratinjau upload ${N}`,className:"w-full h-full object-cover rounded-md shadow-sm"}),e.jsx("button",{type:"button",onClick:()=>oe(N),className:"absolute -top-2 -right-2 p-1.5 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors opacity-0 group-hover:opacity-100","aria-label":a.imageUploader.remove,children:e.jsx("i",{className:"fa-solid fa-xmark text-xs w-3 h-3","aria-hidden":"true"})})]},N))}),e.jsxs("label",{onDragOver:o=>o.preventDefault(),onDrop:q,className:`relative flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${s?"border-gray-300 bg-gray-100 cursor-not-allowed opacity-70":"border-gray-300 bg-gray-50 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-center text-viniela-gray",children:[e.jsx("i",{className:"fa-solid fa-cloud-arrow-up fa-2x w-8 h-8 mb-2","aria-hidden":"true"}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-semibold",children:s?a.imageUploader.uploading||"Mengunggah gambar...":a.imageUploader.uploadCTA})," ",!s&&a.imageUploader.dragAndDrop]}),e.jsx("p",{className:"text-xs",children:a.imageUploader.fileTypes})]}),e.jsx("input",{type:"file",multiple:!0,onChange:R,accept:"image/*",className:"hidden",disabled:s})]})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("h3",{className:"form-section-title",children:a.admin.contentLabel}),e.jsxs("button",{type:"button",onClick:()=>Z("content"),disabled:w.content||!p.content.id,className:"translate-btn",children:[w.content?e.jsx("i",{className:"fa-solid fa-spinner fa-spin w-4 h-4"}):e.jsx("i",{className:"fa-solid fa-language w-4 h-4"}),e.jsx("span",{children:w.content?a.admin.translating:a.admin.translateFromId})]})]}),e.jsx(V,{placeholder:a.admin.contentIdPlaceholder,value:p.content.id,onChange:o=>i("content.id",o)})]}),e.jsxs("div",{className:"flex justify-end items-center space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>L(!0),className:"btn-secondary",children:a.admin.preview}),b&&e.jsx("button",{type:"button",onClick:H,className:"btn-secondary",children:a.admin.cancelButton}),e.jsxs("button",{type:"submit",className:"btn-primary",disabled:F||!xe||s,children:[(F||s)&&e.jsx("i",{className:"fa-solid fa-spinner fa-spin w-5 h-5 mr-2"}),s?"Menunggu upload gambar...":F?a.admin.savingButton:b?a.admin.updateButton:a.admin.createButton]})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg sticky top-28",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-viniela-dark border-b pb-3",children:a.admin.currentNews}),e.jsx("div",{className:"space-y-4 max-h-[65vh] overflow-y-auto pr-2",children:f.length>0?f.map(o=>e.jsxs("div",{className:"bg-viniela-silver/50 p-3 rounded-lg flex items-start space-x-4",children:[o.imageUrls[0]&&e.jsx("img",{src:Y(o.imageUrls[0]),alt:o.title.en,className:"w-20 h-20 object-cover rounded-md flex-shrink-0",loading:"lazy"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-viniela-gold bg-viniela-gold/10 px-2 py-0.5 rounded-full",children:a.admin.categories[o.category]}),e.jsx("h3",{className:"font-semibold text-viniela-dark line-clamp-2 mt-1 text-sm",children:o.title[a.langName.toLowerCase()]||o.title.en||o.title.id}),o.imageUrls.length>1&&e.jsx("div",{className:"flex mt-2 space-x-2 overflow-x-auto pb-1",children:o.imageUrls.slice(1,4).map((N,k)=>e.jsx("img",{src:Y(N),alt:`gambar tambahan ${k+1}`,className:"w-10 h-10 rounded object-cover flex-shrink-0 border border-white shadow-sm",loading:"lazy"},k))}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>ce(o),className:"admin-action-btn bg-blue-500 hover:bg-blue-600",children:e.jsx("i",{className:"fa-solid fa-pencil"})}),e.jsx("button",{onClick:()=>I(o.id),className:"admin-action-btn bg-red-500 hover:bg-red-600",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]})]},o.id)):e.jsx("p",{className:"text-viniela-gray text-center py-8",children:a.admin.noNews})}),d&&d.totalPages>1&&e.jsxs("div",{className:"flex justify-between items-center mt-4 text-sm text-gray-600",children:[e.jsx("button",{type:"button",disabled:r<=1,onClick:()=>S(r-1),className:"px-3 py-1 rounded border disabled:opacity-50 disabled:cursor-not-allowed",children:"« Sebelumnya"}),e.jsxs("span",{children:["Halaman ",d.page," / ",d.totalPages]}),e.jsx("button",{type:"button",disabled:r>=d.totalPages,onClick:()=>S(r+1),className:"px-3 py-1 rounded border disabled:opacity-50 disabled:cursor-not-allowed",children:"Berikutnya »"})]})]})})]})]})},ae="https://api.viniela.id",le=({value:t,onChange:a})=>{const[f,x]=n.useState(!1),d=n.useRef(null),l=()=>{var m;(m=d.current)==null||m.click()},r=async m=>{var h;const u=(h=m.target.files)==null?void 0:h[0];if(!u)return;if(!u.type.startsWith("image/")){alert("File harus berupa gambar");return}const b=new FormData;b.append("file",u);try{x(!0);const p=await fetch(`${ae}/api/team/upload-image`,{method:"POST",body:b});if(!p.ok){const v=await p.json().catch(()=>null),c=(v==null?void 0:v.error)||`Gagal upload gambar (status ${p.status})`;throw new Error(c)}const y=await p.json();y.url?a(y.url):y.path&&a(`${ae}${y.path}`)}catch(p){console.error("Upload gambar gagal:",p),alert(p instanceof Error?p.message:"Gagal upload gambar")}finally{x(!1),m.target.value=""}};return e.jsxs("div",{className:"space-y-2",children:[t&&e.jsx("img",{src:t,alt:"Foto anggota tim",className:"w-20 h-20 rounded-full object-cover border border-gray-200"}),e.jsx("button",{type:"button",onClick:l,disabled:f,className:"btn-secondary text-sm",children:f?"Mengunggah...":t?"Ganti Foto":"Unggah Foto"}),e.jsx("input",{ref:d,type:"file",accept:"image/*",className:"hidden",onChange:r})]})},te={name:"",logoUrl:""},Ve=({showToast:t})=>{const{t:a}=A(),[f,x]=n.useState([]),[d,l]=n.useState(null),[r,m]=n.useState(te),[u,b]=n.useState({}),[h,p]=n.useState(null),[y,v]=n.useState(!1),[c,E]=n.useState(!1);n.useEffect(()=>{(async()=>{try{E(!0);const g=await Ee();x(g)}catch(g){console.error("Gagal memuat partners:",g);const j=g instanceof Error?g.message:"Gagal memuat data partner dari server";t(j,"error")}finally{E(!1)}})()},[t]);const L=(s,g)=>{let j="";(!g||g.trim()==="")&&(j=a.admin.validation.required),b(S=>({...S,[s]:j}))},w=(s,g)=>{L(s,g),m(j=>({...j,[s]:g}))},M=()=>{l(null),m(te),b({})},F=async s=>{s.preventDefault();const g={};if(r.name||(g.name=a.admin.validation.required),r.logoUrl||(g.logoUrl=a.admin.validation.required),b(g),!Object.values(g).some(j=>j)){v(!0);try{if(d){const j=await Le({...d,...r});x(S=>S.map(i=>i.id===j.id?j:i)),t(a.admin.toast.partnerUpdated)}else{const j=await De(r);x(S=>[j,...S]),t(a.admin.toast.partnerCreated)}M()}catch(j){console.error("Gagal menyimpan partner:",j);const S=j instanceof Error?j.message:"Gagal menyimpan data partner ke server";t(S,"error")}finally{v(!1)}}},$=s=>{l(s),m({name:s.name,logoUrl:s.logoUrl}),b({}),window.scrollTo(0,0)},D=async()=>{if(h)try{await Me(h),x(s=>s.filter(g=>g.id!==h)),(d==null?void 0:d.id)===h&&M(),p(null),t(a.admin.toast.partnerDeleted??"Partner deleted")}catch(s){console.error("Gagal menghapus partner:",s);const g=s instanceof Error?s.message:"Gagal menghapus partner di server";t(g,"error")}finally{p(null)}},I=n.useMemo(()=>Object.values(u).every(s=>!s)&&r.name&&r.logoUrl,[u,r.name,r.logoUrl]);return e.jsxs(e.Fragment,{children:[e.jsx(O,{isOpen:!!h,onClose:()=>p(null),onConfirm:D,title:a.admin.deleteModalTitle,message:a.admin.confirmDeletePartner}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 animate-fade-in-up",children:[e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-viniela-dark border-b pb-4",children:d?a.admin.editPartner:a.admin.formTitlePartners}),e.jsxs("form",{onSubmit:F,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:a.admin.partnerNameLabel}),e.jsx("input",{type:"text",value:r.name,onChange:s=>w("name",s.target.value),className:`form-input ${u.name?"border-red-500":""}`,placeholder:a.admin.partnerNamePlaceholder}),u.name&&e.jsx("p",{className:"form-error",children:u.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:a.admin.logoLabel}),e.jsx(le,{value:r.logoUrl,onChange:s=>w("logoUrl",s)}),u.logoUrl&&e.jsx("p",{className:"form-error",children:u.logoUrl})]}),e.jsxs("div",{className:"flex justify-end items-center space-x-3 pt-4",children:[d&&e.jsx("button",{type:"button",onClick:M,className:"btn-secondary",children:a.admin.cancelButton}),e.jsxs("button",{type:"submit",className:"btn-primary",disabled:y||!I,children:[y&&e.jsx("i",{className:"fa-solid fa-spinner fa-spin w-5 h-5 mr-2"}),y?a.admin.savingButton:d?a.admin.updatePartnerButton:a.admin.createPartnerButton]})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-viniela-dark border-b pb-3",children:a.admin.currentPartners}),c?e.jsx("p",{className:"col-span-full text-center text-viniela-gray py-8",children:a.admin.loading||"Memuat data partner..."}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:f.length>0?f.map(s=>e.jsxs("div",{className:"bg-viniela-silver/50 p-4 rounded-lg flex flex-col items-center relative group",children:[e.jsx("img",{src:s.logoUrl,alt:s.name,className:"h-12 object-contain mb-2"}),e.jsx("p",{className:"text-xs text-center font-medium text-viniela-gray",children:s.name}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 gap-2",children:[e.jsx("button",{onClick:()=>$(s),className:"p-2 bg-white rounded-full text-blue-600 hover:text-blue-800",children:e.jsx("i",{className:"fa-solid fa-pencil"})}),e.jsx("button",{onClick:()=>p(s.id),className:"p-2 bg-white rounded-full text-red-600 hover:text-red-800",children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]},s.id)):e.jsx("p",{className:"col-span-full text-center text-viniela-gray py-8",children:a.admin.noPartners})})]})})]})]})},se={name:"",title:{id:"",en:"",cn:""},bio:{id:"",en:"",cn:""},imageUrl:"",linkedinUrl:""},He=({showToast:t})=>{const{t:a}=A(),[f,x]=n.useState([]),[d,l]=n.useState(null),[r,m]=n.useState(se),[u,b]=n.useState({}),[h,p]=n.useState(null),[y,v]=n.useState(!1),[c,E]=n.useState(!1);n.useEffect(()=>{(async()=>{try{E(!0);const g=await re();x(g)}catch(g){console.error("Gagal memuat anggota tim:",g);const j=g instanceof Error?g.message:"Gagal memuat data anggota tim dari server";t(j,"error")}finally{E(!1)}})()},[t]);const L=(s,g)=>{let j="";if(!g||g.trim()==="")j=a.admin.validation.required;else if(s==="linkedinUrl"&&g.trim()!=="")try{new URL(g)}catch{j=a.admin.validation.url}b(S=>({...S,[s]:j}))},w=(s,g)=>{const j=s.replace(/\.id$/,"");["name","title","linkedinUrl"].includes(j)&&L(j,typeof g=="string"?g:""),m(S=>s==="title.id"?{...S,title:{...S.title,id:g}}:s==="bio.id"?{...S,bio:{...S.bio,id:g}}:{...S,[s]:g})},M=()=>{l(null),m(se),b({})},F=async s=>{s.preventDefault();const g={};if(r.name||(g.name=a.admin.validation.required),r.title.id||(g.title=a.admin.validation.required),r.linkedinUrl)try{new URL(r.linkedinUrl)}catch{g.linkedinUrl=a.admin.validation.url}if(b(g),!Object.values(g).some(j=>j)){v(!0);try{if(d){const j=await Ce({...d,...r});x(S=>S.map(i=>i.id===j.id?j:i)),t(a.admin.toast.memberUpdated)}else{const j=await Se(r);x(S=>[j,...S]),t(a.admin.toast.memberCreated)}M()}catch(j){console.error("Gagal menyimpan anggota tim:",j);const S=j instanceof Error?j.message:"Gagal menyimpan data anggota tim ke server";t(S,"error")}finally{v(!1)}}},$=s=>{l(s),m({name:s.name,title:s.title,bio:s.bio,imageUrl:s.imageUrl,linkedinUrl:s.linkedinUrl||""}),b({}),window.scrollTo(0,0)},D=async()=>{if(h)try{await ke(h),x(s=>s.filter(g=>g.id!==h)),(d==null?void 0:d.id)===h&&M(),t(a.admin.toast.memberDeleted??"Anggota tim dihapus")}catch(s){console.error("Gagal menghapus anggota tim:",s);const g=s instanceof Error?s.message:"Gagal menghapus data anggota tim di server";t(g,"error")}finally{p(null)}},I=n.useMemo(()=>Object.values(u).every(s=>!s)&&r.name&&r.title.id,[u,r.name,r.title.id]);return e.jsxs(e.Fragment,{children:[e.jsx(O,{isOpen:!!h,onClose:()=>p(null),onConfirm:D,title:a.admin.deleteModalTitle,message:a.admin.confirmDeleteMember}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 animate-fade-in-up",children:[e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-viniela-dark border-b pb-4",children:d?a.admin.editMember:a.admin.formTitleTeam}),e.jsxs("form",{onSubmit:F,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:a.admin.nameLabel}),e.jsx("input",{type:"text",value:r.name,onChange:s=>w("name",s.target.value),className:`form-input ${u.name?"border-red-500":""}`,placeholder:a.admin.namePlaceholder}),u.name&&e.jsx("p",{className:"form-error",children:u.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:a.admin.jobTitle}),e.jsx("input",{type:"text",value:r.title.id,onChange:s=>w("title.id",s.target.value),className:"form-input",placeholder:a.admin.titleIdPlaceholder}),u.title&&e.jsx("p",{className:"form-error",children:u.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:a.admin.bioLabel}),e.jsx("textarea",{value:r.bio.id,onChange:s=>w("bio.id",s.target.value),className:"form-input h-24",placeholder:a.admin.bioIdPlaceholder})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:a.admin.imageLabel}),e.jsx(le,{value:r.imageUrl,onChange:s=>w("imageUrl",s)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:[a.admin.linkedinUrlLabel," ",e.jsx("span",{className:"text-gray-400 text-xs",children:a.admin.optional})]}),e.jsx("input",{type:"url",value:r.linkedinUrl,onChange:s=>w("linkedinUrl",s.target.value),className:`form-input ${u.linkedinUrl?"border-red-500":""}`,placeholder:a.admin.linkedinUrlPlaceholder}),u.linkedinUrl&&e.jsx("p",{className:"form-error",children:u.linkedinUrl})]}),e.jsxs("div",{className:"flex justify-end items-center space-x-3 pt-4",children:[d&&e.jsx("button",{type:"button",onClick:M,className:"btn-secondary",children:a.admin.cancelButton}),e.jsxs("button",{type:"submit",className:"btn-primary",disabled:y||!I,children:[y&&e.jsx("i",{className:"fa-solid fa-spinner fa-spin w-5 h-5 mr-2"}),y?a.admin.savingButton:d?a.admin.updateMemberButton:a.admin.createMemberButton]})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-viniela-dark border-b pb-3",children:a.admin.currentMembers}),c?e.jsx("p",{className:"text-center text-viniela-gray py-8",children:a.admin.loading||"Memuat data anggota tim..."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:f.length>0?f.map(s=>e.jsxs("div",{className:"bg-viniela-silver/50 p-4 rounded-lg flex items-center gap-4",children:[e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-16 h-16 rounded-full object-cover border-2 border-white shadow-sm"}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsx("h3",{className:"font-bold text-viniela-dark truncate",children:s.name}),e.jsx("p",{className:"text-xs text-viniela-gray truncate",children:s.title.id}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>$(s),className:"text-xs text-blue-600 hover:text-blue-800 font-medium bg-blue-100 px-2 py-1 rounded",children:a.admin.edit}),e.jsx("button",{onClick:()=>p(s.id),className:"text-xs text-red-600 hover:text-red-800 font-medium bg-red-100 px-2 py-1 rounded",children:a.admin.delete})]})]})]},s.id)):e.jsx("p",{className:"col-span-2 text-center text-viniela-gray py-8",children:a.admin.noTeamMembers})})]})})]})]})},We=({message:t,type:a,show:f,onClose:x})=>{n.useEffect(()=>{if(f){const r=setTimeout(()=>{x()},3e3);return()=>clearTimeout(r)}},[f,x]);const d=a==="success"?"bg-green-500":"bg-red-500",l=a==="success"?"fa-check-circle":"fa-exclamation-circle";return e.jsxs("div",{className:`fixed top-5 right-5 z-[101] flex items-center gap-4 px-6 py-4 rounded-lg text-white shadow-lg transition-transform duration-300 ease-in-out ${d} ${f?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,role:"alert","aria-live":"assertive",children:[e.jsx("i",{className:`fa-solid ${l} fa-lg`}),e.jsx("p",{className:"font-semibold",children:t}),e.jsx("button",{onClick:x,className:"ml-4 p-1 rounded-full hover:bg-black/20","aria-label":"Close",children:e.jsx("i",{className:"fa-solid fa-times"})})]})},aa=()=>{const{t}=A(),a=pe(),[f,x]=n.useState("dashboard"),[d,l]=n.useState(!1),[r,m]=n.useState({show:!1,message:"",type:"success"}),u=(y,v="success")=>{m({show:!0,message:y,type:v})},b=()=>{sessionStorage.removeItem("viniela-auth"),a("/login")},h=n.useMemo(()=>[{id:"dashboard",label:t.admin.dashboardTitle,icon:"fa-solid fa-chart-pie"},{id:"news",label:t.admin.newsManagement,icon:"fa-solid fa-newspaper"},{id:"careers",label:t.admin.careersManagement,icon:"fa-solid fa-briefcase"},{id:"team",label:t.admin.teamManagement,icon:"fa-solid fa-users"},{id:"partners",label:t.admin.partnerManagement,icon:"fa-solid fa-handshake"},{id:"contact",label:t.admin.contactManagement,icon:"fa-solid fa-envelope"}],[t]),p=n.useMemo(()=>{var y;return((y=h.find(v=>v.id===f))==null?void 0:y.label)||"Admin Panel"},[f,h]);return e.jsxs("div",{className:"min-h-screen bg-viniela-silver flex font-sans",children:[e.jsx(We,{show:r.show,message:r.message,type:r.type,onClose:()=>m(y=>({...y,show:!1}))}),e.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-viniela-dark text-white transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 shadow-2xl ${d?"translate-x-0":"-translate-x-full"}`,children:[e.jsx("div",{className:"flex items-center justify-center h-20 border-b border-gray-700 bg-black/20",children:e.jsx("h1",{className:"text-2xl font-bold tracking-wider text-viniela-gold",children:"ADMIN PANEL"})}),e.jsx("nav",{className:"p-4 space-y-2 mt-4",children:h.map(y=>e.jsxs("button",{onClick:()=>{x(y.id),l(!1)},className:`w-full flex items-center px-4 py-3 rounded-lg transition-all duration-200 group ${f===y.id?"bg-viniela-gold text-white shadow-lg":"text-gray-400 hover:bg.white/10 hover:text-white"}`,children:[e.jsx("i",{className:`${y.icon} w-6 text-center mr-3 transition-transform group-hover:scale-110`}),e.jsx("span",{className:"font-medium",children:y.label})]},y.id))}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-700 bg-black/20",children:e.jsxs("button",{onClick:b,className:"w-full flex items-center px-4 py-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded-lg transition-colors",children:[e.jsx("i",{className:"fa-solid fa-sign-out-alt w-6 text-center mr-3"}),e.jsx("span",{className:"font-medium",children:t.admin.logout})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[e.jsxs("header",{className:"bg-white shadow-sm border-b border-gray-200 h-20 flex items-center justify-between px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>l(!0),className:"lg:hidden mr-4 text-gray-500 hover:text-viniela-dark",children:e.jsx("i",{className:"fa-solid fa-bars fa-xl"})}),e.jsx("h2",{className:"text-2xl font-bold text-viniela-dark",children:p})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"hidden md:block text-sm text-gray-500",children:"Welcome, Admin"}),e.jsx("div",{className:"w-10 h-10 bg-viniela-gold rounded-full flex items-center justify-center text-white font-bold shadow-md border-2 border-white ring-2 ring-gray-100",children:"A"})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[f==="dashboard"&&e.jsx(Ge,{}),f==="news"&&e.jsx(ze,{showToast:u}),f==="careers"&&e.jsx(Ae,{showToast:u}),f==="team"&&e.jsx(He,{showToast:u}),f==="partners"&&e.jsx(Ve,{showToast:u}),f==="contact"&&e.jsx(Fe,{showToast:u})]})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden backdrop-blur-sm",onClick:()=>l(!1)}),e.jsx("style",{children:`
        .form-section-title { font-weight: 600; color: #1a1a1a; font-size: 0.95rem; margin-bottom: 0.5rem; }
        .form-input { width: 100%; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 0.6rem 1rem; transition: all 0.2s; }
        .form-input:focus { border-color: #c09a58; outline: none; box-shadow: 0 0 0 3px rgba(192, 154, 88, 0.1); }
        .form-label { display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.35rem; }
        .form-error { color: #dc2626; font-size: 0.75rem; margin-top: 0.25rem; }
        .translate-btn { display: flex; align-items: center; gap: 0.5rem; font-size: 0.75rem; color: #c09a58; font-weight: 600; padding: 0.35rem 0.75rem; border-radius: 9999px; background-color: #fffbf0; transition: background 0.2s; }
        .translate-btn:hover:not(:disabled) { background-color: #fef3c7; }
        .translate-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-primary { background-color: #c09a58; color: white; padding: 0.6rem 1.5rem; border-radius: 0.5rem; font-weight: 600; transition: all 0.2s; display: flex; align-items: center; justify-content: center; }
        .btn-primary:hover:not(:disabled) { background-color: #b08b49; transform: translateY(-1px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .btn-primary:disabled { opacity: 0.7; cursor: not-allowed; }
        .btn-secondary { background-color: #f3f4f6; color: #4b5563; padding: 0.6rem 1.5rem; border-radius: 0.5rem; font-weight: 600; transition: all 0.2s; }
        .btn-secondary:hover { background-color: #e5e7eb; color: #1a1a1a; }
        .admin-action-btn { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; transition: all 0.2s; }
        .sub-tab-button { padding: 0.5rem 1.5rem; font-weight: 600; color: #6b7280; border-bottom: 2px solid transparent; transition: all 0.2s; }
        .sub-tab-active { color: #c09a58; border-bottom-color: #c09a58; }
        @keyframes fade-in-up {
          0% { opacity: 0; transform: translateY(10px); }
          100% { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up { animation: fade-in-up 0.4s ease-out forwards; }
      `})]})};export{aa as default};
