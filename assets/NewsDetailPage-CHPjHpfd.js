import{u as I,r as d,j as e,L as y,a as _}from"./index-aN4DhRhX.js";import{l as J,g as K}from"./newsService-BCoSG3Cn.js";const H=({title:a,url:t})=>{const{t:r}=I(),[s,o]=d.useState(!1),m=d.useRef(null);d.useEffect(()=>{const l=n=>{m.current&&!m.current.contains(n.target)&&o(!1)};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[m]);const g=async()=>{if(navigator.share)try{await navigator.share({title:a,text:r.shareButton.shareText.replace("{title}",a).replace("{url}",t)})}catch(l){l.name!=="AbortError"&&(console.error("Web Share API failed, falling back to manual options:",l),o(!0))}else o(l=>!l)},x=[{name:r.shareButton.networks.facebook,href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`,icon:"fa-brands fa-facebook"},{name:r.shareButton.networks.twitter,href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(t)}&text=${encodeURIComponent(a)}`,icon:"fa-brands fa-twitter"},{name:r.shareButton.networks.linkedIn,href:`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(t)}&title=${encodeURIComponent(a)}`,icon:"fa-brands fa-linkedin"},{name:r.shareButton.networks.whatsApp,href:`https://api.whatsapp.com/send?text=${encodeURIComponent(`${a} ${t}`)}`,icon:"fa-brands fa-whatsapp"},{name:r.shareButton.networks.email,href:`mailto:?subject=${encodeURIComponent(a)}&body=${encodeURIComponent(`Check out this article: ${t}`)}`,icon:"fa-solid fa-envelope"}];return e.jsxs("div",{className:"relative",ref:m,children:[e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-viniela-gold text-white font-semibold rounded-lg shadow-md hover:bg-viniela-gold-dark transition-all duration-300","aria-label":"Share article",children:[e.jsx("i",{className:"fa-solid fa-share-nodes w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"hidden sm:inline",children:r.shareButton.share})]}),s&&e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-48 bg-white rounded-lg shadow-xl p-2 z-10 animate-fade-in-up-fast",children:[e.jsx("p",{className:"text-sm font-semibold text-viniela-dark px-2 pb-2 border-b mb-2",children:r.shareButton.shareVia}),e.jsx("div",{className:"space-y-1",children:x.map(l=>e.jsxs("a",{href:l.href,target:"_blank",rel:"noopener noreferrer",onClick:()=>o(!1),className:"w-full flex items-center text-left px-3 py-2 text-sm rounded-md transition-colors duration-200 text-viniela-gray hover:bg-viniela-silver",children:[e.jsx("i",{className:`${l.icon} w-5 h-5 mr-3 fa-lg`,"aria-hidden":"true"}),l.name]},l.name))})]}),e.jsx("style",{children:`
                @keyframes fade-in-up-fast { 
                    0% { opacity: 0; transform: translateY(10px); }
                    100% { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in-up-fast { animation: fade-in-up-fast 0.2s ease-out forwards; }
            `})]})},$=["company","division","industry","press"],j=({title:a,children:t})=>e.jsxs("div",{className:"bg-viniela-silver p-6 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-viniela-dark pb-3 mb-4 border-b-2 border-viniela-gold/30",children:a}),t]}),W=({currentArticleId:a})=>{const{t,language:r}=I(),[s,o]=d.useState([]);d.useEffect(()=>{let n=!0;return(async()=>{try{const f=[...(await J(1,50)).data].sort((w,N)=>new Date(N.date).getTime()-new Date(w.date).getTime());n&&o(f)}catch(u){console.error("Failed to load sidebar news:",u)}})(),()=>{n=!1}},[]);const m=$.reduce((n,u)=>(n[u]=s.filter(f=>f.category===u).length,n),{}),g=t.newsDetail.mockTags,x=s.filter(n=>n.id!==a).slice(0,3),l=r;return e.jsxs("div",{className:"space-y-8 lg:sticky lg:top-28",children:[e.jsx(j,{title:t.sidebar.search,children:e.jsxs("form",{className:"relative",onSubmit:n=>{n.preventDefault()},children:[e.jsx("input",{type:"search",placeholder:t.sidebar.searchPlaceholder,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-viniela-gold focus:border-viniela-gold"}),e.jsx("button",{type:"submit",className:"absolute top-0 right-0 h-full px-3 text-viniela-gray hover:text-viniela-dark",children:e.jsx("i",{className:"fa-solid fa-search","aria-hidden":"true"})})]})}),e.jsx(j,{title:t.sidebar.categories,children:e.jsx("ul",{className:"space-y-3",children:$.map(n=>e.jsx("li",{children:e.jsxs(y,{to:"/news",className:"flex justify-between items-center text-viniela-gray hover:text-viniela-gold transition-colors group",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-arrow-right text-viniela-gold/50 group-hover:text-viniela-gold transition-colors","aria-hidden":"true"}),t.admin.categories[n]]}),e.jsxs("span",{children:["(",m[n]||0,")"]})]})},n))})}),e.jsx(j,{title:t.sidebar.recentPosts,children:e.jsxs("div",{className:"space-y-4",children:[x.map(n=>{const u=n.imageUrls&&n.imageUrls.length>0?n.imageUrls[0]:"https://picsum.photos/seed/news-sidebar/200/200";return e.jsxs(y,{to:`/news/${n.id}`,className:"flex items-center gap-4 group",children:[e.jsx("img",{src:u,alt:n.title[l],className:"w-20 h-20 object-cover rounded-md flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:new Date(n.date).toLocaleDateString(l==="cn"?"zh-CN":l)}),e.jsx("h4",{className:"font-semibold text-viniela-dark leading-tight line-clamp-2 group-hover:text-viniela-gold transition-colors",children:n.title[l]})]})]},n.id)}),x.length===0&&e.jsx("p",{className:"text-sm text-viniela-gray",children:t.newsList.noArticles})]})}),e.jsx(j,{title:t.sidebar.tags,children:e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(n=>e.jsx(y,{to:"/news",className:"px-4 py-1.5 bg-white border rounded hover:bg-viniela-gold hover:text-white hover:border-viniela-gold transition-colors text-sm text-viniela-gray",children:n},n))})})]})},U="vinielaComments",O=()=>{try{const a=localStorage.getItem(U);return a?JSON.parse(a):[]}catch(a){return console.error("Failed to parse comments from localStorage",a),[]}},Q=a=>{try{localStorage.setItem(U,JSON.stringify(a))}catch(t){console.error("Failed to save comments to localStorage",t)}},X=a=>O().filter(r=>r.articleId===a).sort((r,s)=>new Date(s.date).getTime()-new Date(r.date).getTime()),Z=a=>{const t=O(),r={...a,id:new Date().getTime().toString(),date:new Date().toISOString(),avatar:`https://i.pravatar.cc/150?u=${a.author.replace(/\s/g,"")}${new Date().getTime()}`},s=[r,...t];return Q(s),r},ee=({images:a,selectedIndex:t,onClose:r,onNavigate:s})=>(d.useEffect(()=>{const o=m=>{m.key==="Escape"&&r(),m.key==="ArrowRight"&&s((t+1)%a.length),m.key==="ArrowLeft"&&s((t-1+a.length)%a.length)};return window.addEventListener("keydown",o),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",o),document.body.style.overflow="auto"}},[t,a.length,r,s]),e.jsxs("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",onClick:r,children:[e.jsx("button",{className:"absolute top-4 right-4 text-white text-3xl z-10 hover:opacity-75",onClick:r,"aria-label":"Close gallery",children:e.jsx("i",{className:"fa-solid fa-xmark"})}),e.jsx("button",{className:"absolute left-0 md:left-4 text-white text-4xl z-10 p-4 hover:opacity-75",onClick:o=>{o.stopPropagation(),s((t-1+a.length)%a.length)},"aria-label":"Previous image",children:"❮"}),e.jsx("img",{src:a[t],alt:`Gallery image ${t+1}`,className:"max-w-[90vw] max-h-[90vh] object-contain",onClick:o=>o.stopPropagation()}),e.jsx("button",{className:"absolute right-0 md:right-4 text-white text-4xl z-10 p-4 hover:opacity-75",onClick:o=>{o.stopPropagation(),s((t+1)%a.length)},"aria-label":"Next image",children:"❯"})]})),se=()=>{const{id:a}=_(),{t,language:r}=I(),[s,o]=d.useState(null),[m,g]=d.useState(!1),[x,l]=d.useState([]),[n,u]=d.useState({name:"",email:"",message:""}),[f,w]=d.useState(!1),[N,D]=d.useState(!1),[G,E]=d.useState(0);d.useEffect(()=>{if(!a)return;let i=!0;return(async()=>{try{const h=await K(a);if(!i)return;o(h),l(X(a))}catch(h){console.error("Failed to load article:",h),i&&(o(null),l([]))}})(),()=>{i=!1}},[a]),d.useEffect(()=>{window.scrollTo(0,0)},[a]),d.useEffect(()=>{var b;const i="A clean and modern corporate website for VINIELA Group, featuring company information, divisions, news, and a content management system for news articles. The site is multi-lingual and fully responsive.";let c=document.querySelector('meta[name="description"]');c||(c=document.createElement("meta"),c.setAttribute("name","description"),document.head.appendChild(c));let h=document.querySelector('meta[name="keywords"]');if(h||(h=document.createElement("meta"),h.setAttribute("name","keywords"),document.head.appendChild(h)),s){const p=s.title[r]||s.title.en,M=s.content[r]||s.content.en,V=`${p} | VINIELA Group`;document.title=V;const S=M.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim(),L=S.length>160?`${S.substring(0,157)}...`:S;c.setAttribute("content",L);const q=["VINIELA Group",t.admin.categories[s.category],...p.split(" ").slice(0,5)].join(", ");h.setAttribute("content",q);const Y={"@context":"https://schema.org","@type":"NewsArticle",headline:p,image:s.imageUrls,datePublished:new Date(s.date).toISOString(),author:{"@type":"Organization",name:"VINIELA Group"},publisher:{"@type":"Organization",name:"VINIELA Group"},description:L},T="news-article-json-ld";(b=document.getElementById(T))==null||b.remove();const v=document.createElement("script");v.id=T,v.type="application/ld+json",v.innerHTML=JSON.stringify(Y),document.head.appendChild(v)}return()=>{var p;document.title="VINIELA Group",(p=document.getElementById("news-article-json-ld"))==null||p.remove(),c&&c.setAttribute("content",i),h&&h.setAttribute("content","")}},[s,r,t.admin.categories]);const k=i=>{const{name:c,value:h}=i.target;u(b=>({...b,[c]:h}))},B=i=>{if(i.preventDefault(),a&&n.name&&n.message){const c=Z({articleId:a,author:n.name,email:n.email,text:n.message});l(h=>[c,...h]),u({name:"",email:"",message:""}),w(!0),setTimeout(()=>w(!1),3e3)}},A=i=>{E(i),D(!0)};if(!s)return e.jsxs("div",{className:"container mx-auto px-6 py-20 text-center min-h-[50vh] flex flex-col justify-center items-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:t.newsDetail.notFound}),e.jsx(y,{to:"/news",className:"mt-6 inline-block text-white bg-viniela-gold hover:bg-viniela-gold-dark px-6 py-2 rounded-lg transition-colors",children:t.newsDetail.backToNews})]});const R=t.newsDetail.mockTags,F=t.admin.categories[s.category],C=s.title[r]||s.title.en,P=s.content[r]||s.content.en,z=s.imageUrls&&s.imageUrls.length>0?s.imageUrls[0]:"https://picsum.photos/seed/placeholder/800/600";return e.jsxs("div",{className:"bg-white py-12 md:py-20 animate-fade-in-up",children:[N&&s.imageUrls&&e.jsx(ee,{images:s.imageUrls,selectedIndex:G,onClose:()=>D(!1),onNavigate:E}),e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-12",children:[e.jsxs("main",{className:"w-full lg:w-8/12 order-1 lg:order-2",children:[e.jsxs("article",{children:[e.jsx("button",{onClick:()=>A(0),className:"w-full block rounded-lg shadow-md overflow-hidden mb-6",children:e.jsx("img",{src:z,alt:C,className:"w-full h-auto object-cover"})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 text-sm text-viniela-gray mb-4",children:[e.jsx("span",{className:"inline-block px-3 py-1 bg-viniela-gold text-white font-semibold text-xs rounded uppercase",children:F}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user","aria-hidden":"true"})," ",t.newsDetail.adminBy]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-comments","aria-hidden":"true"})," ",t.newsDetail.comments," (",x.length,")"]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-calendar-days","aria-hidden":"true"})," ",new Date(s.date).toLocaleDateString(r==="cn"?"zh-CN":r,{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-viniela-dark mb-4 leading-tight",children:C}),e.jsx("div",{className:"prose prose-lg max-w-none text-viniela-gray",dangerouslySetInnerHTML:{__html:P}}),s.imageUrls.length>1&&e.jsxs("section",{className:"mt-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-viniela-dark mb-4 border-b pb-2",children:"Image Gallery"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.imageUrls.map((i,c)=>e.jsx("button",{onClick:()=>A(c),className:"aspect-square block overflow-hidden rounded-lg shadow-md hover:shadow-xl transition-shadow focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-viniela-gold",children:e.jsx("img",{src:i,alt:`Gallery thumbnail ${c+1}`,className:"w-full h-full object-cover transform hover:scale-110 transition-transform duration-300"})},c))})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6 text-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("h4",{className:"font-semibold text-viniela-dark flex-shrink-0",children:t.newsDetail.tags}),e.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(i=>e.jsx("span",{className:"px-3 py-1 bg-viniela-silver rounded text-viniela-gray",children:i.toUpperCase()},i))})]}),e.jsx("div",{className:"self-start sm:self-center",children:e.jsx(H,{title:C,url:window.location.href})})]})]}),e.jsxs("section",{className:"mt-12",children:[e.jsxs("h2",{className:"text-2xl font-bold text-viniela-dark mb-6 border-b pb-4",children:[t.newsDetail.comments," (",x.length,")"]}),e.jsx("div",{className:"space-y-6",children:x.length>0?x.map(i=>e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("img",{src:i.avatar,alt:i.author,className:"w-16 h-16 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-bold text-viniela-dark",children:i.author}),e.jsx("p",{className:"text-viniela-gray mt-1",children:i.text}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:new Date(i.date).toLocaleString(r==="cn"?"zh-CN":r,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("button",{className:"text-sm font-semibold text-viniela-gold hover:text-viniela-gold-dark",children:t.newsDetail.reply})]})]})]},i.id)):e.jsx("p",{className:"text-viniela-gray text-center py-4",children:t.newsDetail.noComments})})]}),e.jsxs("section",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-viniela-dark mb-6 border-b pb-4",children:t.newsDetail.leaveComment}),e.jsxs("form",{onSubmit:B,className:"p-8 bg-viniela-silver rounded-lg space-y-4",children:[f&&e.jsx("div",{className:"p-4 bg-green-100 text-green-800 border border-green-200 rounded-md text-center",children:t.newsDetail.commentSuccess}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",name:"name",value:n.name,onChange:k,placeholder:t.newsDetail.yourName,className:"form-input",required:!0}),e.jsx("input",{type:"email",name:"email",value:n.email,onChange:k,placeholder:t.newsDetail.yourEmail,className:"form-input",required:!0})]}),e.jsx("textarea",{name:"message",value:n.message,onChange:k,placeholder:t.newsDetail.writeMessage,rows:5,className:"form-input",required:!0}),e.jsx("button",{type:"submit",className:"px-8 py-3 bg-viniela-gold text-white font-semibold rounded-lg shadow-md hover:bg-viniela-gold-dark transition-all duration-300",children:t.newsDetail.postComment})]})]})]}),e.jsxs("div",{className:"w-full lg:w-4/12 order-2 lg:order-1",children:[e.jsx("div",{className:"lg:hidden",children:e.jsxs("button",{onClick:()=>g(!m),className:"w-full flex justify-between items-center px-6 py-4 bg-viniela-silver rounded-lg text-left font-bold text-viniela-dark text-lg shadow-sm hover:shadow-md transition-shadow","aria-expanded":m,"aria-controls":"news-sidebar-content",children:[e.jsx("span",{children:t.newsDetail.exploreMore}),e.jsx("i",{className:`fa-solid fa-chevron-down w-6 h-6 transition-transform duration-300 ${m?"rotate-180":""}`,"aria-hidden":"true"})]})}),e.jsx("aside",{id:"news-sidebar-content",className:`${m?"block mt-8 animate-fade-in-up":"hidden"} lg:block lg:mt-0`,children:e.jsx(W,{currentArticleId:a||""})})]})]})}),e.jsx("style",{children:`
        .form-input {
          display: block;
          width: 100%;
          border-radius: 0.5rem;
          border: 1px solid #e5e7eb;
          padding: 0.75rem 1rem;
          background-color: white;
        }
        .form-input:focus {
          outline: 2px solid transparent;
          outline-offset: 2px;
          border-color: #c09a58;
          box-shadow: 0 0 0 2px #c09a58;
        }
        @keyframes fade-in-up {
          0% { opacity: 0; transform: translateY(20px); }
          100% { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up { animation: fade-in-up 0.6s ease-out forwards; }
        @keyframes fade-in { 0% { opacity: 0; } 100% { opacity: 1; } }
        .animate-fade-in { animation: fade-in 0.2s ease-out forwards; }
      `})]})};export{se as default};
