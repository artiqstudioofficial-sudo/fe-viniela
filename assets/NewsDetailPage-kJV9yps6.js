import{u as k,r as o,j as e,L as v,a as V}from"./index-_EZrd0Hu.js";import{g as q,a as F}from"./newsService-Dp_0vM3k.js";const $="vinielaComments",L=()=>{try{const a=localStorage.getItem($);return a?JSON.parse(a):[]}catch(a){return console.error("Failed to parse comments from localStorage",a),[]}},Y=a=>{try{localStorage.setItem($,JSON.stringify(a))}catch(t){console.error("Failed to save comments to localStorage",t)}},_=a=>L().filter(n=>n.articleId===a).sort((n,s)=>new Date(s.date).getTime()-new Date(n.date).getTime()),J=a=>{const t=L(),n={...a,id:new Date().getTime().toString(),date:new Date().toISOString(),avatar:`https://i.pravatar.cc/150?u=${a.author.replace(/\s/g,"")}${new Date().getTime()}`},s=[n,...t];return Y(s),n},T=["company","division","industry","press"],b=({title:a,children:t})=>e.jsxs("div",{className:"bg-viniela-silver p-6 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-viniela-dark pb-3 mb-4 border-b-2 border-viniela-gold/30",children:a}),t]}),K=({currentArticleId:a})=>{const{t,language:n}=k(),[s,l]=o.useState([]);o.useEffect(()=>{const d=q().sort((x,j)=>new Date(j.date).getTime()-new Date(x.date).getTime());l(d)},[]);const c=T.reduce((r,d)=>(r[d]=s.filter(x=>x.category===d).length,r),{}),p=t.newsDetail.mockTags,u=s.filter(r=>r.id!==a).slice(0,3);return e.jsxs("div",{className:"space-y-8 lg:sticky lg:top-28",children:[e.jsx(b,{title:t.sidebar.search,children:e.jsxs("form",{className:"relative",children:[e.jsx("input",{type:"search",placeholder:t.sidebar.searchPlaceholder,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-viniela-gold focus:border-viniela-gold"}),e.jsx("button",{type:"submit",className:"absolute top-0 right-0 h-full px-3 text-viniela-gray hover:text-viniela-dark",children:e.jsx("i",{className:"fa-solid fa-search","aria-hidden":"true"})})]})}),e.jsx(b,{title:t.sidebar.categories,children:e.jsx("ul",{className:"space-y-3",children:T.map(r=>e.jsx("li",{children:e.jsxs(v,{to:"/news",className:"flex justify-between items-center text-viniela-gray hover:text-viniela-gold transition-colors group",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-arrow-right text-viniela-gold/50 group-hover:text-viniela-gold transition-colors","aria-hidden":"true"}),t.admin.categories[r]]}),e.jsxs("span",{children:["(",c[r]||0,")"]})]})},r))})}),e.jsx(b,{title:t.sidebar.recentPosts,children:e.jsx("div",{className:"space-y-4",children:u.map(r=>e.jsxs(v,{to:`/news/${r.id}`,className:"flex items-center gap-4 group",children:[e.jsx("img",{src:r.imageUrl,alt:r.title[n],className:"w-20 h-20 object-cover rounded-md flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:new Date(r.date).toLocaleDateString()}),e.jsx("h4",{className:"font-semibold text-viniela-dark leading-tight line-clamp-2 group-hover:text-viniela-gold transition-colors",children:r.title[n]})]})]},r.id))})}),e.jsx(b,{title:t.sidebar.tags,children:e.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(r=>e.jsx(v,{to:"/news",className:"px-4 py-1.5 bg-white border rounded hover:bg-viniela-gold hover:text-white hover:border-viniela-gold transition-colors text-sm text-viniela-gray",children:r},r))})})]})},H=({title:a,url:t})=>{const{t:n}=k(),[s,l]=o.useState(!1),c=o.useRef(null);o.useEffect(()=>{const r=d=>{c.current&&!c.current.contains(d.target)&&l(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[c]);const p=async()=>{if(navigator.share)try{await navigator.share({title:a,text:n.shareButton.shareText.replace("{title}",a).replace("{url}",t)})}catch(r){r.name!=="AbortError"&&(console.error("Web Share API failed, falling back to manual options:",r),l(!0))}else l(r=>!r)},u=[{name:n.shareButton.networks.facebook,href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`,icon:"fa-brands fa-facebook"},{name:n.shareButton.networks.twitter,href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(t)}&text=${encodeURIComponent(a)}`,icon:"fa-brands fa-twitter"},{name:n.shareButton.networks.linkedIn,href:`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(t)}&title=${encodeURIComponent(a)}`,icon:"fa-brands fa-linkedin"},{name:n.shareButton.networks.whatsApp,href:`https://api.whatsapp.com/send?text=${encodeURIComponent(`${a} ${t}`)}`,icon:"fa-brands fa-whatsapp"},{name:n.shareButton.networks.email,href:`mailto:?subject=${encodeURIComponent(a)}&body=${encodeURIComponent(`Check out this article: ${t}`)}`,icon:"fa-solid fa-envelope"}];return e.jsxs("div",{className:"relative",ref:c,children:[e.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-viniela-gold text-white font-semibold rounded-lg shadow-md hover:bg-viniela-gold-dark transition-all duration-300","aria-label":"Share article",children:[e.jsx("i",{className:"fa-solid fa-share-nodes w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"hidden sm:inline",children:n.shareButton.share})]}),s&&e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-48 bg-white rounded-lg shadow-xl p-2 z-10 animate-fade-in-up-fast",children:[e.jsx("p",{className:"text-sm font-semibold text-viniela-dark px-2 pb-2 border-b mb-2",children:n.shareButton.shareVia}),e.jsx("div",{className:"space-y-1",children:u.map(r=>e.jsxs("a",{href:r.href,target:"_blank",rel:"noopener noreferrer",onClick:()=>l(!1),className:"w-full flex items-center text-left px-3 py-2 text-sm rounded-md transition-colors duration-200 text-viniela-gray hover:bg-viniela-silver",children:[e.jsx("i",{className:`${r.icon} w-5 h-5 mr-3 fa-lg`,"aria-hidden":"true"}),r.name]},r.name))})]}),e.jsx("style",{children:`
                @keyframes fade-in-up-fast { 
                    0% { opacity: 0; transform: translateY(10px); }
                    100% { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in-up-fast { animation: fade-in-up-fast 0.2s ease-out forwards; }
            `})]})},W=({images:a,selectedIndex:t,onClose:n,onNavigate:s})=>(o.useEffect(()=>{const l=c=>{c.key==="Escape"&&n(),c.key==="ArrowRight"&&s((t+1)%a.length),c.key==="ArrowLeft"&&s((t-1+a.length)%a.length)};return window.addEventListener("keydown",l),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",l),document.body.style.overflow="auto"}},[t,a.length,n,s]),e.jsxs("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",onClick:n,children:[e.jsx("button",{className:"absolute top-4 right-4 text-white text-3xl z-10 hover:opacity-75",onClick:n,"aria-label":"Close gallery",children:e.jsx("i",{className:"fa-solid fa-xmark"})}),e.jsx("button",{className:"absolute left-0 md:left-4 text-white text-4xl z-10 p-4 hover:opacity-75",onClick:l=>{l.stopPropagation(),s((t-1+a.length)%a.length)},"aria-label":"Previous image",children:"❮"}),e.jsx("img",{src:a[t],alt:`Gallery image ${t+1}`,className:"max-w-[90vw] max-h-[90vh] object-contain",onClick:l=>l.stopPropagation()}),e.jsx("button",{className:"absolute right-0 md:right-4 text-white text-4xl z-10 p-4 hover:opacity-75",onClick:l=>{l.stopPropagation(),s((t+1)%a.length)},"aria-label":"Next image",children:"❯"})]})),Z=()=>{const{id:a}=V(),{t,language:n}=k(),[s,l]=o.useState(null),[c,p]=o.useState(!1),[u,r]=o.useState([]),[d,x]=o.useState({name:"",email:"",message:""}),[j,C]=o.useState(!1),[U,S]=o.useState(!1),[O,I]=o.useState(0);o.useEffect(()=>{if(a){const i=F(a);l(i),r(_(a))}},[a]),o.useEffect(()=>{window.scrollTo(0,0)},[a]),o.useEffect(()=>{var g;const i="A clean and modern corporate website for VINIELA Group, featuring company information, divisions, news, and a content management system for news articles. The site is multi-lingual and fully responsive.";let m=document.querySelector('meta[name="description"]');m||(m=document.createElement("meta"),m.setAttribute("name","description"),document.head.appendChild(m));let h=document.querySelector('meta[name="keywords"]');if(h||(h=document.createElement("meta"),h.setAttribute("name","keywords"),document.head.appendChild(h)),s){const f=`${s.title[n]} | VINIELA Group`;document.title=f;const N=s.content[n].replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim(),E=N.length>160?`${N.substring(0,157)}...`:N;m.setAttribute("content",E);const z=["VINIELA Group",t.admin.categories[s.category],...s.title[n].split(" ").slice(0,5)].join(", ");h.setAttribute("content",z);const M={"@context":"https://schema.org","@type":"NewsArticle",headline:s.title[n],image:s.imageUrls,datePublished:new Date(s.date).toISOString(),author:{"@type":"Organization",name:"VINIELA Group"},publisher:{"@type":"Organization",name:"VINIELA Group"},description:E},A="news-article-json-ld";(g=document.getElementById(A))==null||g.remove();const w=document.createElement("script");w.id=A,w.type="application/ld+json",w.innerHTML=JSON.stringify(M),document.head.appendChild(w)}return()=>{var f;document.title="VINIELA Group",(f=document.getElementById("news-article-json-ld"))==null||f.remove(),m&&m.setAttribute("content",i),h&&h.setAttribute("content","")}},[s,n,t.admin.categories]);const y=i=>{const{name:m,value:h}=i.target;x(g=>({...g,[m]:h}))},G=i=>{if(i.preventDefault(),a&&d.name&&d.message){const m=J({articleId:a,author:d.name,email:d.email,text:d.message});r(h=>[m,...h]),x({name:"",email:"",message:""}),C(!0),setTimeout(()=>C(!1),3e3)}},D=i=>{I(i),S(!0)};if(!s)return e.jsxs("div",{className:"container mx-auto px-6 py-20 text-center min-h-[50vh] flex flex-col justify-center items-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:t.newsDetail.notFound}),e.jsx(v,{to:"/news",className:"mt-6 inline-block text-white bg-viniela-gold hover:bg-viniela-gold-dark px-6 py-2 rounded-lg transition-colors",children:t.newsDetail.backToNews})]});const B=t.newsDetail.mockTags,R=t.admin.categories[s.category],P=s.imageUrls&&s.imageUrls.length>0?s.imageUrls[0]:"https://picsum.photos/seed/placeholder/800/600";return e.jsxs("div",{className:"bg-white py-12 md:py-20 animate-fade-in-up",children:[U&&s.imageUrls&&e.jsx(W,{images:s.imageUrls,selectedIndex:O,onClose:()=>S(!1),onNavigate:I}),e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-12",children:[e.jsxs("main",{className:"w-full lg:w-8/12 order-1 lg:order-2",children:[e.jsxs("article",{children:[e.jsx("button",{onClick:()=>D(0),className:"w-full block rounded-lg shadow-md overflow-hidden mb-6",children:e.jsx("img",{src:P,alt:s.title[n],className:"w-full h-auto object-cover"})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 text-sm text-viniela-gray mb-4",children:[e.jsx("span",{className:"inline-block px-3 py-1 bg-viniela-gold text-white font-semibold text-xs rounded uppercase",children:R}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user","aria-hidden":"true"})," ",t.newsDetail.adminBy]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-comments","aria-hidden":"true"})," ",t.newsDetail.comments," (",u.length,")"]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-calendar-days","aria-hidden":"true"})," ",new Date(s.date).toLocaleDateString(n==="cn"?"zh-CN":n,{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-viniela-dark mb-4 leading-tight",children:s.title[n]}),e.jsx("div",{className:"prose prose-lg max-w-none text-viniela-gray",dangerouslySetInnerHTML:{__html:s.content[n]}}),s.imageUrls.length>1&&e.jsxs("section",{className:"mt-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-viniela-dark mb-4 border-b pb-2",children:"Image Gallery"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.imageUrls.map((i,m)=>e.jsx("button",{onClick:()=>D(m),className:"aspect-square block overflow-hidden rounded-lg shadow-md hover:shadow-xl transition-shadow focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-viniela-gold",children:e.jsx("img",{src:i,alt:`Gallery thumbnail ${m+1}`,className:"w-full h-full object-cover transform hover:scale-110 transition-transform duration-300"})},m))})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6 text-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("h4",{className:"font-semibold text-viniela-dark flex-shrink-0",children:t.newsDetail.tags}),e.jsx("div",{className:"flex flex-wrap gap-2",children:B.map(i=>e.jsx("span",{className:"px-3 py-1 bg-viniela-silver rounded text-viniela-gray",children:i.toUpperCase()},i))})]}),e.jsx("div",{className:"self-start sm:self-center",children:e.jsx(H,{title:s.title[n],url:window.location.href})})]})]}),e.jsxs("section",{className:"mt-12",children:[e.jsxs("h2",{className:"text-2xl font-bold text-viniela-dark mb-6 border-b pb-4",children:[t.newsDetail.comments," (",u.length,")"]}),e.jsx("div",{className:"space-y-6",children:u.length>0?u.map(i=>e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("img",{src:i.avatar,alt:i.author,className:"w-16 h-16 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-bold text-viniela-dark",children:i.author}),e.jsx("p",{className:"text-viniela-gray mt-1",children:i.text}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:new Date(i.date).toLocaleString(n,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("button",{className:"text-sm font-semibold text-viniela-gold hover:text-viniela-gold-dark",children:t.newsDetail.reply})]})]})]},i.id)):e.jsx("p",{className:"text-viniela-gray text-center py-4",children:t.newsDetail.noComments})})]}),e.jsxs("section",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-viniela-dark mb-6 border-b pb-4",children:t.newsDetail.leaveComment}),e.jsxs("form",{onSubmit:G,className:"p-8 bg-viniela-silver rounded-lg space-y-4",children:[j&&e.jsx("div",{className:"p-4 bg-green-100 text-green-800 border border-green-200 rounded-md text-center",children:t.newsDetail.commentSuccess}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",name:"name",value:d.name,onChange:y,placeholder:t.newsDetail.yourName,className:"form-input",required:!0}),e.jsx("input",{type:"email",name:"email",value:d.email,onChange:y,placeholder:t.newsDetail.yourEmail,className:"form-input",required:!0})]}),e.jsx("textarea",{name:"message",value:d.message,onChange:y,placeholder:t.newsDetail.writeMessage,rows:5,className:"form-input",required:!0}),e.jsx("button",{type:"submit",className:"px-8 py-3 bg-viniela-gold text-white font-semibold rounded-lg shadow-md hover:bg-viniela-gold-dark transition-all duration-300",children:t.newsDetail.postComment})]})]})]}),e.jsxs("div",{className:"w-full lg:w-4/12 order-2 lg:order-1",children:[e.jsx("div",{className:"lg:hidden",children:e.jsxs("button",{onClick:()=>p(!c),className:"w-full flex justify-between items-center px-6 py-4 bg-viniela-silver rounded-lg text-left font-bold text-viniela-dark text-lg shadow-sm hover:shadow-md transition-shadow","aria-expanded":c,"aria-controls":"news-sidebar-content",children:[e.jsx("span",{children:t.newsDetail.exploreMore}),e.jsx("i",{className:`fa-solid fa-chevron-down w-6 h-6 transition-transform duration-300 ${c?"rotate-180":""}`,"aria-hidden":"true"})]})}),e.jsx("aside",{id:"news-sidebar-content",className:`${c?"block mt-8 animate-fade-in-up":"hidden"} lg:block lg:mt-0`,children:e.jsx(K,{currentArticleId:a})})]})]})}),e.jsx("style",{children:`
                .form-input { display: block; width: 100%; border-radius: 0.5rem; border: 1px solid #e5e7eb; padding: 0.75rem 1rem; background-color: white; }
                .form-input:focus { outline: 2px solid transparent; outline-offset: 2px; border-color: #c09a58; box-shadow: 0 0 0 2px #c09a58; }
                 @keyframes fade-in-up {
                    0% { opacity: 0; transform: translateY(20px); }
                    100% { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in-up { animation: fade-in-up 0.6s ease-out forwards; }
                @keyframes fade-in { 0% { opacity: 0; } 100% { opacity: 1; } }
                .animate-fade-in { animation: fade-in 0.2s ease-out forwards; }
            `})]})};export{Z as default};
