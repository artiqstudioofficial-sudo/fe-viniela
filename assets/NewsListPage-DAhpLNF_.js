import{u as L,r as i,j as e,L as C}from"./index-aN4DhRhX.js";import{C as A}from"./CTA-iuEZuyB8.js";import{N as E}from"./NewsCard-CMUgTNok.js";import{l as S}from"./newsService-BCoSG3Cn.js";const v=["company","division","industry","press"],D=()=>{const{t:a,language:o}=L(),[p,f]=i.useState([]),[w,m]=i.useState([]),[r,h]=i.useState("all"),[c,b]=i.useState(""),[u,y]=i.useState(!1),[x,N]=i.useState(null);return i.useEffect(()=>{window.scrollTo(0,0);let t=!0;return(async()=>{try{y(!0),N(null);const n=[...(await S(1,200)).data||[]].sort((g,j)=>new Date(j.date).getTime()-new Date(g.date).getTime());if(!t)return;f(n),m(n)}catch(s){if(console.error("Failed to load news:",s),!t)return;N((s==null?void 0:s.message)||"Failed to load news"),f([]),m([])}finally{t&&y(!1)}})(),()=>{t=!1}},[]),i.useEffect(()=>{const t=`${a.newsList.title} | VINIELA Group`;document.title=t;const l="A clean and modern corporate website for VINIELA Group, featuring company information, divisions, news, and a content management system for news articles. The site is multi-lingual and fully responsive.";let s=document.querySelector('meta[name="description"]');s&&s.setAttribute("content",a.newsList.subtitle);const d=["VINIELA Group",a.nav.news,...v.map(g=>a.admin.categories[g])].join(", ");let n=document.querySelector('meta[name="keywords"]');return n||(n=document.createElement("meta"),n.setAttribute("name","keywords"),document.head.appendChild(n)),n.setAttribute("content",d),()=>{document.title="VINIELA Group",s&&s.setAttribute("content",l),n&&n.setAttribute("content","")}},[a]),i.useEffect(()=>{let t=p;if(r!=="all"&&(t=t.filter(l=>l.category===r)),c){const l=c.toLowerCase();t=t.filter(s=>{const d=s.title[o]||s.title.en||"",n=(s.content[o]||s.content.en||"").replace(/<[^>]+>/g,"").toLowerCase();return d.toLowerCase().includes(l)||n.includes(l)})}m(t)},[r,p,c,o]),e.jsxs("div",{className:"bg-viniela-silver animate-fade-in-up",children:[e.jsx("section",{className:"py-20",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("header",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-viniela-dark",children:a.newsList.title}),e.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-lg text-viniela-gray",children:a.newsList.subtitle})]}),e.jsx("div",{className:"max-w-xl mx-auto mb-8",children:e.jsx("input",{type:"search",value:c,onChange:t=>b(t.target.value),placeholder:a.search.placeholderNews,className:"w-full px-5 py-3 border border-gray-300 rounded-full shadow-sm focus:ring-2 focus:ring-viniela-gold focus:border-viniela-gold transition","aria-label":"Search news articles"})}),e.jsxs("div",{className:"flex justify-center flex-wrap gap-2 md:gap-4 mb-12",children:[e.jsx("button",{onClick:()=>h("all"),className:`px-4 py-2 text-sm font-semibold rounded-full transition-all duration-300 ${r==="all"?"bg-viniela-gold text-white shadow-md":"bg-white text-viniela-gray hover:bg-viniela-gold hover:text-white"}`,children:a.newsList.allCategories}),v.map(t=>e.jsx("button",{onClick:()=>h(t),className:`px-4 py-2 text-sm font-semibold rounded-full transition-all duration-300 ${r===t?"bg-viniela-gold text-white shadow-md":"bg-white text-viniela-gray hover:bg-viniela-gold hover:text-white"}`,children:a.admin.categories[t]},t))]}),u&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-3xl text-viniela-gold mb-4"}),e.jsx("p",{className:"text-viniela-gray",children:"Loading news..."})]}),!u&&x&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("p",{className:"text-xl text-red-600 mb-2",children:"Failed to load news"}),e.jsx("p",{className:"text-sm text-viniela-gray",children:x})]}),!u&&!x&&e.jsx(e.Fragment,{children:w.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:w.map(t=>e.jsx(C,{to:`/news/${t.id}`,className:"block",children:e.jsx(E,{article:t,lang:o,categoryTranslations:a.admin.categories})},t.id))}):e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-xl text-viniela-gray",children:a.newsList.noArticles})})})]})}),e.jsx(A,{}),e.jsx("style",{children:`
        @keyframes fade-in-up {
          0% {
            opacity: 0;
            transform: translateY(20px);
          }
          100% {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.5s ease-out forwards;
        }
      `})]})};export{D as default};
